<odoo>
    <data>
        <record model="ir.ui.view" id="ctt_partial_reconcile_wizard_form">
            <field name="name">Wizard for partial reconciliation</field>
            <field name="model">ctt_partial_reconcile.wizard</field>
            <field name="active">1</field>
            <field name="arch" type="xml">
                <form string="Partial reconciliation">
                    <group>
                        <field name="wizard_origin" invisible="1"/>
                        <field name="partner_id" options="{'no_open':True,'no_create':True,'no_create_edit':True}" attrs="{'readonly':[('wizard_origin','!=','menu_item')]}"/>
                        <field name="type" required="1" attrs="{'invisible':[('wizard_origin','!=','menu_item')]}"/>
                        <field name="account_id" required="1" options="{'no_open':True,'no_create':True,'no_create_edit':True}" domain="[('account_type','=',type)]" attrs="{'readonly':[('wizard_origin','!=','menu_item')]}"/>
                    </group>
                    <field name="line_ids_opc_1" attrs="{'readonly':[('account_id','=',False)],'invisible':[('partner_id','=',False)]}">
                        <tree editable="bottom">
                            <field name="wizard_id_1" invisible="1"/>
                            <field name="wizard_id_1_account_id" invisible="1"/>
                            <field name="wizard_id_1_partner_id" invisible="1"/>
                            <field name="line_id_id" invisible="1"/>
                            <field name="line_id" string="Journal entry (selected partner)" required="1" options="{'no_open':True,'no_create':True,'no_create_edit':True}" domain="[('parent_state','=','posted'),('account_id','=',wizard_id_1_account_id),('amount_residual','!=',0),('partner_id','in',[wizard_id_1_partner_id,False])]" context="{'tree_view_ref':'account.view_move_line_tree'}"/>
                            <field name="line_id_debit" readonly="1" sum="line_id_debit" optional="hide"/>
                            <field name="line_id_credit" readonly="1" sum="line_id_credit" optional="hide"/>
                            <field name="line_id_balance" readonly="1" sum="line_id_balance" optional="hide"/>
                            <field name="line_id_amount_residual" readonly="1" sum="line_id_amount_residual" optional="show"/>
                            <field name="amount" required="1" sum="amount"/>
                        </tree> 
                    </field>
                    
                    <field name="line_ids_opc_2" attrs="{'readonly':[('account_id','=',False)],'invisible':[('partner_id','!=',False)]}">
                        <tree editable="bottom">
                            <field name="wizard_id_2" invisible="1"/>
                            <field name="wizard_id_2_account_id" invisible="1"/>
                            <field name="wizard_id_2_partner_id" invisible="1"/>
                            <field name="line_id_id" invisible="1"/>
                            <field name="line_id" string="Journal entry (without partner)" required="1" options="{'no_open':True,'no_create':True,'no_create_edit':True}" domain="[('parent_state','=','posted'),('account_id','=',wizard_id_2_account_id),('amount_residual','!=',0)]" context="{'tree_view_ref':'account.view_move_line_tree'}"/>
                            <field name="line_id_debit" readonly="1" sum="line_id_debit" optional="hide"/>
                            <field name="line_id_credit" readonly="1" sum="line_id_credit" optional="hide"/>
                            <field name="line_id_balance" readonly="1" sum="line_id_balance" optional="hide"/>
                            <field name="line_id_amount_residual" readonly="1" sum="line_id_amount_residual" optional="show"/>
                            <field name="amount" required="1" sum="amount"/>
                        </tree> 
                    </field>
                    <footer>
                        <button name="reconcile"
                            string="RECONCILE" type="object"
                            class="btn-primary oe_highlight"/>
                        <button string="CLOSE"
                            class="btn-default"
                            special="cancel" />
                    </footer>
                </form>
            </field>
        </record>
        
        <record id="ctt_partial_reconcile_wizard_action" model="ir.actions.act_window">
            <field name="name">Wizard for partial reconciliation</field>
            <field name="res_model">ctt_partial_reconcile.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>
        
        <menuitem id="ctt_partial_reconcile_wizard_menu"  
            name="Partial reconciliation"  
            action="ctt_partial_reconcile_wizard_action" 
            parent="account.menu_finance_entries_actions"
            sequence="-1" />
    </data>
</odoo>